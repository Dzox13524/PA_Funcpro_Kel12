<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AgroHub - Platform Pertanian Digital Indonesia</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />

    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <nav class="navbar" id="navbar">
      <div class="nav-container">
        <div class="logo" onclick="closeProfile()" style="cursor: pointer">
          <i class="fas fa-seedling"></i>
          AgroHub
        </div>
        <ul class="nav-menu" id="navMenu">
          <li><a href="#home" onclick="closeProfile()">Beranda</a></li>
          <li><a href="#features" onclick="closeProfile()">Fitur</a></li>
          <li><a href="#products" onclick="closeProfile()">Marketplace</a></li>
          <li><a href="#forum" onclick="closeProfile()">Forum</a></li>
          <li><a href="#pest" onclick="closeProfile()">Pest Control</a></li>
          <li id="authButtons">
            <button class="btn-login" onclick="openLoginModal()">Masuk</button>
          </li>
        </ul>
        <div class="mobile-toggle" onclick="toggleMenu()">
          <i class="fas fa-bars"></i>
        </div>
      </div>
    </nav>

    <section class="hero" id="home">
      <div class="hero-particles" id="particles"></div>
      <div class="hero-content">
        <h1>Revolusi Pertanian Digital Indonesia</h1>
        <p>
          Platform terpadu untuk petani modern. Jual beli hasil panen,
          konsultasi ahli, dan monitoring hama dalam satu tempat.
        </p>
        <div class="hero-buttons">
          <button class="btn btn-primary" onclick="openRegisterModal()">
            Mulai Sekarang
          </button>
          <button
            class="btn btn-secondary"
            onclick="scrollToSection('features')"
          >
            Pelajari Lebih Lanjut
          </button>
        </div>
      </div>
    </section>

    <section class="features" id="features">
      <div class="container">
        <div class="section-header">
          <h2>Fitur Unggulan</h2>
          <p>Solusi lengkap untuk meningkatkan produktivitas pertanian Anda</p>
        </div>
        <div class="features-grid">
          <div class="feature-card">
            <i class="fas fa-store feature-icon"></i>
            <h3>Marketplace Terpercaya</h3>
            <p>
              Jual beli hasil panen dan sarana produksi pertanian dengan sistem
              Pre-Order yang aman dan transparan.
            </p>
          </div>
          <div class="feature-card">
            <i class="fas fa-comments feature-icon"></i>
            <h3>Forum Konsultasi</h3>
            <p>
              Tanyakan masalah pertanian Anda dan dapatkan jawaban dari sesama
              petani dan ahli pertanian.
            </p>
          </div>
          <div class="feature-card">
            <i class="fas fa-bug feature-icon"></i>
            <h3>Pest Control Map</h3>
            <p>
              Monitoring sebaran hama secara real-time dan dapatkan peringatan
              dini untuk wilayah Anda.
            </p>
          </div>
          <div class="feature-card">
            <i class="fas fa-chart-line feature-icon"></i>
            <h3>Analytics Dashboard</h3>
            <p>
              Pantau performa bisnis pertanian Anda dengan dashboard yang mudah
              dipahami.
            </p>
          </div>
          <div class="feature-card">
            <i class="fas fa-shield-alt feature-icon"></i>
            <h3>Transaksi Aman</h3>
            <p>
              Sistem pembayaran yang terjamin keamanannya dengan berbagai
              pilihan metode pembayaran.
            </p>
          </div>
          <div class="feature-card">
            <i class="fas fa-mobile-alt feature-icon"></i>
            <h3>Mobile Friendly</h3>
            <p>
              Akses platform kapan saja, dimana saja melalui smartphone Anda
              dengan tampilan responsif.
            </p>
          </div>
        </div>
      </div>
    </section>
    <div class="modal" id="reservationModal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('reservationModal')"
          >&times;</span
        >
        <h2><i class="fas fa-calendar-check"></i> Ajukan Reservasi</h2>

        <form onsubmit="handleReservationSubmit(event)">
          <input type="hidden" id="resProductId" />

          <div class="order-summary-box" style="border-color: var(--accent)">
            <h3 id="resProductName">Nama Produk</h3>
            <p style="font-size: 0.9rem; color: var(--text-muted)">
              Sisa Stok: <span id="resProductStock">0</span>
            </p>
            <div
              style="margin-top: 5px; font-size: 0.85rem; color: var(--accent)"
            >
              <i class="fas fa-info-circle"></i> Produk akan disimpan untuk
              Anda.
            </div>
          </div>

          <div class="form-group">
            <label>Jumlah Reservasi</label>
            <div style="display: flex; gap: 10px; align-items: center">
              <button type="button" class="btn-qty" onclick="adjustResQty(-1)">
                <i class="fas fa-minus"></i>
              </button>
              <input
                type="number"
                id="resQuantity"
                value="1"
                min="1"
                style="text-align: center"
              />
              <button type="button" class="btn-qty" onclick="adjustResQty(1)">
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </div>

          <div class="form-group">
            <label>Catatan / Tanggal Pengambilan</label>
            <textarea
              id="resNote"
              placeholder="Contoh: Akan diambil tanggal 25, mohon disiapkan..."
              style="min-height: 80px"
              required
            ></textarea>
          </div>

          <button
            type="submit"
            class="btn btn-primary"
            style="
              width: 100%;
              margin-top: 1rem;
              background: var(--accent);
              border-color: var(--accent);
              color: #000;
            "
            id="btnConfirmRes"
          >
            Konfirmasi Reservasi
          </button>
        </form>
      </div>
    </div>
    <section class="products" id="products">
      <div class="container">
        <div class="section-header">
          <h2>Marketplace Produk</h2>
          <p>Temukan berbagai produk pertanian berkualitas</p>
        </div>

        <div
          class="search-wrapper"
          style="
            max-width: 1000px;
            margin: 0 auto 3rem;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
          "
        >
          <input
            type="text"
            id="searchInput"
            placeholder="Cari nama produk..."
            onkeyup="handleSearch()"
            style="
              flex: 2;
              min-width: 200px;
              padding: 1rem 1.5rem;
              border-radius: 50px;
              border: 1px solid rgba(16, 185, 129, 0.2);
              background: var(--dark-light);
              color: var(--text);
            "
          />

          <select
            id="searchCrop"
            onchange="handleSearch()"
            style="
              flex: 1;
              min-width: 150px;
              padding: 0 1.5rem;
              border-radius: 50px;
              border: 1px solid rgba(16, 185, 129, 0.2);
              background: var(--dark-light);
              color: var(--text);
            "
          >
            <option value="">Semua Tanaman</option>
          </select>

          <select
            id="searchRegion"
            onchange="handleSearch()"
            style="
              flex: 1;
              min-width: 150px;
              padding: 0 1.5rem;
              border-radius: 50px;
              border: 1px solid rgba(16, 185, 129, 0.2);
              background: var(--dark-light);
              color: var(--text);
            "
          >
            <option value="">Semua Wilayah</option>
          </select>

          <button
            onclick="handleSearch()"
            style="
              padding: 0 1.5rem;
              background: var(--primary);
              border: none;
              border-radius: 50px;
              color: white;
              cursor: pointer;
            "
          >
            <i class="fas fa-search"></i>
          </button>
        </div>

        <div class="products-grid" id="productsContainer">
          <div class="empty-state">
            <div class="loading"></div>
            <p>Memuat produk...</p>
          </div>
        </div>
        <div
          style="text-align: center; margin-top: 3rem"
          id="createProductBtn"
          style="display: none"
        >
          <button class="btn btn-primary" onclick="openCreateProductModal()">
            <i class="fas fa-plus"></i> Tambah Produk Baru
          </button>
        </div>
      </div>
    </section>

    <section class="forum" id="forum">
      <div class="container">
        <div class="section-header">
          <h2>Forum Diskusi</h2>
          <p>Berbagi pengalaman dan solusi dengan komunitas petani</p>
        </div>
        <div class="forum-grid" id="forumContainer">
          <div class="empty-state">
            <div class="loading"></div>
            <p>Memuat diskusi...</p>
          </div>
        </div>
        <div style="text-align: center; margin-top: 3rem">
          <button class="btn btn-primary" onclick="openAskModal()">
            <i class="fas fa-plus"></i> Buat Pertanyaan Baru
          </button>
        </div>
      </div>
    </section>

    <section class="pest-control" id="pest">
      <div class="container">
        <div class="section-header">
          <h2>Pest Control Map</h2>
          <p>Monitoring sebaran hama dan penyakit tanaman secara real-time</p>
        </div>
        <div class="map-container">
          <div
            id="pestMap"
            style="height: 450px; width: 100%; border-radius: 15px; z-index: 1"
          ></div>
        </div>
        <div class="alerts-grid" id="alertsContainer">
          <div class="empty-state">
            <div class="loading"></div>
            <p>Memuat laporan hama...</p>
          </div>
        </div>
        <div style="text-align: center; margin-top: 3rem">
          <button class="btn btn-primary" onclick="openReportModal()">
            <i class="fas fa-exclamation-triangle"></i> Laporkan Hama Baru
          </button>
        </div>
      </div>
    </section>

    <section class="stats">
      <div class="container">
        <div class="section-header">
          <h2>Statistik Platform</h2>
          <p>Pertumbuhan komunitas AgroHub</p>
        </div>
        <div class="stats-grid">
          <div class="stat-card">
            <i class="fas fa-users stat-icon"></i>
            <div class="stat-number" id="statUsers">0</div>
            <div class="stat-label">Petani Terdaftar</div>
          </div>
          <div class="stat-card">
            <i class="fas fa-box stat-icon"></i>
            <div class="stat-number" id="statProducts">0</div>
            <div class="stat-label">Produk Tersedia</div>
          </div>
          <div class="stat-card">
            <i class="fas fa-comment-dots stat-icon"></i>
            <div class="stat-number" id="statQuestions">0</div>
            <div class="stat-label">Diskusi Forum</div>
          </div>
          <div class="stat-card">
            <i class="fas fa-bug stat-icon"></i>
            <div class="stat-number" id="statAlerts">0</div>
            <div class="stat-label">Laporan Hama</div>
          </div>
        </div>
      </div>
    </section>
    <section class="profile-section" id="profileSection" style="display: none">
      <div class="container">
        <button class="btn-back-profile" onclick="closeProfile()">
          <i class="fas fa-arrow-left"></i> Kembali ke Beranda
        </button>

        <div class="profile-header-card">
          <div class="profile-avatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="profile-info">
            <h2 id="profileName">Nama Pengguna</h2>
            <p id="profileEmail">email@contoh.com</p>
            <div class="profile-badges">
              <span class="badge badge-primary">Petani</span>
              <span class="badge badge-outline">Verifikasi Member</span>
            </div>
          </div>
          <div class="profile-actions">
            <button class="btn btn-secondary" onclick="openEditProfileModal()">
              <i class="fas fa-user-edit"></i> Edit Profil
            </button>
            <button class="btn btn-danger" onclick="logout()">
              <i class="fas fa-sign-out-alt"></i> Keluar
            </button>
          </div>
        </div>

        <div class="profile-tabs">
          <button
            id="tab-btn-my-products"
            class="tab-btn active"
            onclick="switchProfileTab('my-products')"
          >
            <i class="fas fa-box"></i> Produk Saya
          </button>
          <button
            id="tab-btn-my-orders"
            class="tab-btn"
            onclick="switchProfileTab('my-orders')"
          >
            <i class="fas fa-shopping-bag"></i> Pesanan Saya
          </button>
          <button
            id="tab-btn-my-reservations"
            class="tab-btn"
            onclick="switchProfileTab('my-reservations')"
          >
            <i class="fas fa-calendar-check"></i> Reservasi
          </button>
        </div>

        <div id="tab-my-products" class="profile-tab-content active">
          <div class="tab-header">
            <h3>Daftar Produk yang Anda Jual</h3>
            <button
              class="btn btn-primary btn-small"
              onclick="openCreateProductModal()"
            >
              <i class="fas fa-plus"></i> Tambah Produk
            </button>
          </div>
          <div class="products-grid" id="myProductsList">
            <div class="empty-state">Memuat data...</div>
          </div>
        </div>

        <div
          id="tab-my-orders"
          class="profile-tab-content"
          style="display: none"
        >
          <h3>Riwayat Pembelian</h3>
          <div class="list-vertical" id="myOrdersList">
            <div class="empty-state">Belum ada pesanan</div>
          </div>
        </div>

        <div
          id="tab-my-reservations"
          class="profile-tab-content"
          style="display: none"
        >
          <h3>Status Reservasi</h3>
          <div class="list-vertical" id="myReservationsList">
            <div class="empty-state">Belum ada reservasi</div>
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Tentang AgroHub</h3>
          <p>
            Platform digital terdepan untuk memberdayakan petani Indonesia
            dengan teknologi modern dan akses pasar yang lebih luas.
          </p>
          <div class="social-links">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
          </div>
        </div>
        <div class="footer-section">
          <h3>Tautan Cepat</h3>
          <a href="#features">Fitur</a>
          <a href="#products">Marketplace</a>
          <a href="#forum">Forum</a>
          <a href="#pest">Pest Control</a>
        </div>
        <div class="footer-section">
          <h3>Bantuan</h3>
          <a href="#">Panduan Pengguna</a>
          <a href="#">FAQ</a>
          <a href="#">Kontak Support</a>
          <a href="#">Syarat & Ketentuan</a>
        </div>
        <div class="footer-section">
          <h3>Kontak Kami</h3>
          <p><i class="fas fa-map-marker-alt"></i> Jember, Jawa Timur</p>
          <p><i class="fas fa-phone"></i> +62 812-3456-7890</p>
          <p><i class="fas fa-envelope"></i> info@agrohub.id</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>
          &copy; 2024 AgroHub. Hak Cipta Dilindungi. Dibuat Oleh crozerx_jombang
        </p>
      </div>
    </footer>

    <div class="modal" id="loginModal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('loginModal')"
          >&times;</span
        >
        <h2><i class="fas fa-sign-in-alt"></i> Masuk ke AgroHub</h2>
        <form onsubmit="handleLogin(event)">
          <div class="form-group">
            <label>Email</label>
            <input
              type="email"
              id="loginEmail"
              placeholder="nama@email.com"
              required
            />
          </div>
          <div class="form-group">
            <label>Password</label>
            <input
              type="password"
              id="loginPassword"
              placeholder="Masukkan password"
              required
            />
          </div>
          <button
            type="submit"
            class="btn btn-primary"
            style="width: 100%"
            id="loginBtn"
          >
            Masuk
          </button>
          <p
            style="
              text-align: center;
              margin-top: 1rem;
              color: var(--text-muted);
            "
          >
            Belum punya akun?
            <a
              href="#"
              onclick="closeModal('loginModal'); openRegisterModal();"
              style="color: var(--primary)"
              >Daftar sekarang</a
            >
          </p>
        </form>
      </div>
    </div>

    <div class="modal" id="registerModal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('registerModal')"
          >&times;</span
        >
        <h2><i class="fas fa-user-plus"></i> Daftar AgroHub</h2>
        <form onsubmit="handleRegister(event)">
          <div class="form-group">
            <label>Nama Lengkap</label>
            <input
              type="text"
              id="registerName"
              placeholder="Nama Anda"
              required
            />
          </div>
          <div class="form-group">
            <label>Email</label>
            <input
              type="email"
              id="registerEmail"
              placeholder="nama@email.com"
              required
            />
          </div>
          <div class="form-group">
            <label>Password</label>
            <input
              type="password"
              id="registerPassword"
              placeholder="Minimal 8 karakter"
              required
            />
          </div>
          <button
            type="submit"
            class="btn btn-primary"
            style="width: 100%"
            id="registerBtn"
          >
            Daftar
          </button>
          <p
            style="
              text-align: center;
              margin-top: 1rem;
              color: var(--text-muted);
            "
          >
            Sudah punya akun?
            <a
              href="#"
              onclick="closeModal('registerModal'); openLoginModal();"
              style="color: var(--primary)"
              >Masuk</a
            >
          </p>
        </form>
      </div>
    </div>

    <div class="modal" id="createProductModal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('createProductModal')"
          >&times;</span
        >
        <h2><i class="fas fa-box"></i> Tambah Produk Baru</h2>
        <form onsubmit="handleCreateProduct(event)">
          <div class="form-group">
            <label>Nama Produk</label>
            <input
              type="text"
              id="productName"
              placeholder="Contoh: Pupuk Organik Premium"
              required
            />
          </div>
          <div class="form-group">
            <label>Deskripsi</label>
            <textarea
              id="productDescription"
              placeholder="Jelaskan detail produk Anda..."
              required
            ></textarea>
          </div>
          <div class="form-group">
            <label>Jenis Tanaman</label>
            <select id="productCrop" required>
              <option value="">Pilih Jenis Tanaman</option>
            </select>
          </div>
          <div class="form-group">
            <label>Wilayah</label>
            <select id="productRegion" required>
              <option value="">Pilih Wilayah</option>
            </select>
          </div>
          <div class="form-group">
            <label>Harga (Rp)</label>
            <input
              type="number"
              id="productPrice"
              placeholder="50000"
              required
            />
          </div>
          <div class="form-group">
            <label>Stok</label>
            <input type="number" id="productStock" placeholder="100" required />
          </div>
          <div class="form-group">
            <label>Gambar Produk (Opsional)</label>
            <input type="file" id="productImage" accept="image/*" />
          </div>
          <button
            type="submit"
            class="btn btn-primary"
            style="width: 100%"
            id="createProductBtnSubmit"
          >
            Tambah Produk
          </button>
        </form>
      </div>
    </div>

    <div class="modal" id="editProductModal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('editProductModal')"
          >&times;</span
        >
        <h2><i class="fas fa-edit"></i> Edit Produk</h2>
        <form onsubmit="handleUpdateProduct(event)">
          <input type="hidden" id="editProductId" />
          <div class="form-group">
            <label>Nama Produk</label
            ><input type="text" id="editProductName" required />
          </div>
          <div class="form-group">
            <label>Deskripsi</label
            ><textarea id="editProductDescription" required></textarea>
          </div>
          <div class="form-group">
            <label>Jenis Tanaman</label
            ><select id="editProductCrop" required>
              <option value="">Pilih Jenis Tanaman</option>
            </select>
          </div>
          <div class="form-group">
            <label>Wilayah</label
            ><select id="editProductRegion" required>
              <option value="">Pilih Wilayah</option>
            </select>
          </div>
          <div class="form-group">
            <label>Harga (Rp)</label
            ><input type="number" id="editProductPrice" required />
          </div>
          <div class="form-group">
            <label>Stok</label
            ><input type="number" id="editProductStock" required />
          </div>
          <button type="submit" class="btn btn-primary" style="width: 100%">
            Simpan Perubahan
          </button>
        </form>
      </div>
    </div>

    <div class="modal" id="productDetailModal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('productDetailModal')"
          >&times;</span
        >
        <div id="productDetailContent">
          <div class="loading"></div>
        </div>
      </div>
    </div>

    <div class="modal" id="questionDetailModal">
      <div class="modal-content" style="max-width: 700px">
        <span class="modal-close" onclick="closeModal('questionDetailModal')"
          >&times;</span
        >
        <div id="questionDetailContent">
          <div class="loading"></div>
        </div>
      </div>
    </div>

    <div class="modal" id="editProfileModal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('editProfileModal')"
          >&times;</span
        >
        <h2><i class="fas fa-user-edit"></i> Edit Profil</h2>
        <form onsubmit="handleUpdateProfile(event)">
          <div class="form-group">
            <label>Email (Tidak dapat diubah)</label>
            <input
              type="email"
              id="editProfileEmail"
              disabled
              style="
                background: var(--dark-lighter);
                cursor: not-allowed;
                opacity: 0.7;
              "
            />
          </div>
          <div class="form-group">
            <label>Nama Lengkap</label>
            <input type="text" id="editProfileName" required />
          </div>
          <div class="form-group">
            <label>Password Baru (Opsional)</label>
            <input
              type="password"
              id="editProfilePassword"
              placeholder="Kosongkan jika tidak ingin mengganti"
            />
            <small style="color: var(--text-muted); font-size: 0.8rem"
              >Minimal 8 karakter jika ingin mengganti</small
            >
          </div>
          <button
            type="submit"
            class="btn btn-primary"
            style="width: 100%"
            id="btnUpdateProfile"
          >
            Simpan Perubahan
          </button>
        </form>
      </div>
    </div>

    <div class="modal" id="buyModal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('buyModal')"
          >&times;</span
        >
        <h2><i class="fas fa-shopping-cart"></i> Konfirmasi Pesanan</h2>

        <form onsubmit="handleOrderSubmit(event)">
          <input type="hidden" id="buyProductId" />
          <input type="hidden" id="buyProductPriceUnit" />

          <div class="order-summary-box">
            <h3 id="buyProductName">Nama Produk</h3>
            <p
              id="buyProductPriceDisplay"
              style="color: var(--primary); font-weight: bold"
            >
              Rp 0
            </p>
            <p style="font-size: 0.9rem; color: var(--text-muted)">
              Sisa Stok: <span id="buyProductStock">0</span>
            </p>
          </div>

          <div class="form-group">
            <label>Jumlah Pembelian</label>
            <div style="display: flex; gap: 10px; align-items: center">
              <button type="button" class="btn-qty" onclick="adjustQty(-1)">
                <i class="fas fa-minus"></i>
              </button>
              <input
                type="number"
                id="buyQuantity"
                value="1"
                min="1"
                oninput="calculateTotal()"
                style="text-align: center"
              />
              <button type="button" class="btn-qty" onclick="adjustQty(1)">
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </div>

          <div class="form-group">
            <label>Catatan untuk Penjual (Opsional)</label>
            <textarea
              id="buyNote"
              placeholder="Contoh: Tolong dipacking kayu, dikirim pagi hari, dll..."
              style="min-height: 80px"
            ></textarea>
          </div>

          <div class="total-payment-box">
            <span>Total Pembayaran:</span>
            <span id="buyTotalPrice" class="total-amount">Rp 0</span>
          </div>

          <button
            type="submit"
            class="btn btn-primary"
            style="width: 100%; margin-top: 1rem"
            id="btnConfirmOrder"
          >
            Buat Pesanan
          </button>
        </form>
      </div>
    </div>
    <div class="modal" id="reservationModal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('reservationModal')"
          >&times;</span
        >
        <h2><i class="fas fa-calendar-check"></i> Ajukan Reservasi</h2>

        <form onsubmit="handleReservationSubmit(event)">
          <input type="hidden" id="resProductId" />

          <div class="order-summary-box" style="border-color: var(--accent)">
            <h3 id="resProductName">Nama Produk</h3>
            <p style="font-size: 0.9rem; color: var(--text-muted)">
              Sisa Stok: <span id="resProductStock">0</span>
            </p>
            <div
              style="margin-top: 5px; font-size: 0.85rem; color: var(--accent)"
            >
              <i class="fas fa-info-circle"></i> Produk akan disimpan untuk
              Anda.
            </div>
          </div>

          <div class="form-group">
            <label>Jumlah Reservasi</label>
            <div style="display: flex; gap: 10px; align-items: center">
              <button type="button" class="btn-qty" onclick="adjustResQty(-1)">
                <i class="fas fa-minus"></i>
              </button>
              <input
                type="number"
                id="resQuantity"
                value="1"
                min="1"
                style="text-align: center"
              />
              <button type="button" class="btn-qty" onclick="adjustResQty(1)">
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </div>

          <div class="form-group">
            <label>Catatan / Tanggal Pengambilan</label>
            <textarea
              id="resNote"
              placeholder="Contoh: Akan diambil tanggal 25, mohon disiapkan..."
              style="min-height: 80px"
              required
            ></textarea>
          </div>

          <button
            type="submit"
            class="btn btn-primary"
            style="
              width: 100%;
              margin-top: 1rem;
              background: var(--accent);
              border-color: var(--accent);
              color: #000;
            "
            id="btnConfirmRes"
          >
            Konfirmasi Reservasi
          </button>
        </form>
      </div>
    </div>
    <div class="modal" id="askModal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('askModal')"
          >&times;</span
        >
        <h2><i class="fas fa-question-circle"></i> Buat Pertanyaan</h2>
        <form onsubmit="handleAsk(event)">
          <div class="form-group">
            <label>Judul Pertanyaan</label>
            <input
              type="text"
              id="questionTitle"
              placeholder="Tulis judul singkat dan jelas"
              required
            />
          </div>
          <div class="form-group">
            <label>Kategori</label>
            <select id="questionCategory" required>
              <option value="">Pilih Kategori</option>
              <option value="Hama & Penyakit">Hama & Penyakit</option>
              <option value="Pupuk & Nutrisi">Pupuk & Nutrisi</option>
              <option value="Teknik Budidaya">Teknik Budidaya</option>
              <option value="Irigasi & Air">Irigasi & Air</option>
              <option value="Panen & Pasca Panen">Panen & Pasca Panen</option>
              <option value="Lainnya">Lainnya</option>
            </select>
          </div>
          <div class="form-group">
            <label>Detail Pertanyaan</label>
            <textarea
              id="questionContent"
              placeholder="Jelaskan masalah Anda secara detail..."
              required
            ></textarea>
          </div>
          <button
            type="submit"
            class="btn btn-primary"
            style="width: 100%"
            id="askBtn"
          >
            Posting Pertanyaan
          </button>
        </form>
      </div>
    </div>

    <div class="modal" id="reportModal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('reportModal')"
          >&times;</span
        >
        <h2><i class="fas fa-exclamation-triangle"></i> Laporkan Hama</h2>
        <form onsubmit="handleReport(event)">
          <div class="form-group">
            <label>Jenis Hama/Penyakit</label>
            <input
              type="text"
              id="pestName"
              placeholder="Contoh: Wereng, Blast, Bercak Daun"
              required
            />
          </div>

          <div class="form-group">
            <label>Wilayah (Kabupaten/Kota)</label>
            <select id="pestCity" required>
              <option value="">Pilih Wilayah</option>
            </select>
          </div>
          <div class="form-group">
            <label>Tingkat Keparahan</label>
            <select id="pestSeverity" required>
              <option value="">Pilih Tingkat</option>
              <option value="low">Rendah</option>
              <option value="medium">Sedang</option>
              <option value="high">Tinggi</option>
            </select>
          </div>
          <div class="form-group">
            <label>Deskripsi</label>
            <textarea
              id="pestDescription"
              placeholder="Jelaskan kondisi serangan dan area yang terdampak..."
              required
            ></textarea>
          </div>
          <button
            type="submit"
            class="btn btn-primary"
            style="width: 100%"
            id="reportBtn"
          >
            Kirim Laporan
          </button>
        </form>
      </div>
    </div>

    <div class="toast" id="toast"></div>
    <script src="./index.js"></script>
  </body>
</html>
